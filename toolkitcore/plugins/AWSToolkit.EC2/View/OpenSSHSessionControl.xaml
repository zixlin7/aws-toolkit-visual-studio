<local:OpenLinuxToolControl x:Class="Amazon.AWSToolkit.EC2.View.OpenSSHSessionControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:commonui="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"  
    xmlns:local="clr-namespace:Amazon.AWSToolkit.EC2.View"                              
    Height="460" Width="450">

    <local:OpenLinuxToolControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </local:OpenLinuxToolControl.Resources>
    
    <StackPanel Orientation="Vertical">
        
        <Grid Margin="5,5,5,10">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Margin="5,5,5,5" Text="User name:" Style="{DynamicResource awsTextBlockBaseStyle}"/>
            <TextBox Grid.Row="0" Grid.Column="1" Margin="5,5,5,5" Text="{Binding EnteredUsername}" Style="{DynamicResource awsTextBoxStyle}"/>
        </Grid>


        <RadioButton Margin="5,5,5,5" Name="_ctlUseKeypairSelected" 
                     GroupName="TypeOfCredentials" IsChecked="True"
                     Style="{DynamicResource awsRadioButtonBaseStyle}">Use EC2 keypair to log on</RadioButton>
        <Grid Margin="20,5,5,10" IsEnabled="{Binding ElementName=_ctlUseKeypairSelected, Path=IsChecked}" Name="_ctlPrivateKeyGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Private Key:" Margin="5,5,5,5" VerticalAlignment="Top" Style="{DynamicResource awsTextBlockBaseStyle}"/>
            <DockPanel Grid.Row="0" Grid.Column="1" MinHeight="150" MaxHeight="150">
                <TextBlock Margin="5,5,5,0" DockPanel.Dock="Bottom" TextWrapping="Wrap"
                           Style="{DynamicResource awsFieldHintTextStyle}" FontStyle="Italic">
                    Please include the entire text, including the Begin and End lines (Ex: "-----BEGIN RSA PRIVATE KEY-----")
                </TextBlock>
                <TextBox Margin="5,0,5,5" AcceptsReturn="True" Text="{Binding PrivateKey}" TextWrapping="Wrap" 
                         Name="_ctlPrivateKey" Style="{DynamicResource awsTextBoxStyle}" VerticalAlignment="Stretch"/>
            </DockPanel>
            <CheckBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="5,5,5,5" IsChecked="{Binding SavePrivateKey}"
                    ToolTip="Checking this will cause the private key to be stored encrypted within the toolkit.  Future attempts to connect will not require the private key. The private key can be managed in the Key Pairs view."
                    Style="{DynamicResource awsCheckboxButtonBaseStyle}">
                Save Private Key
            </CheckBox>
        </Grid>
        <RadioButton Margin="5,5,5,5" Name="_ctlUseCustomCredentialsSelected" 
                     GroupName="TypeOfCredentials"
                     Style="{DynamicResource awsRadioButtonBaseStyle}">Enter password</RadioButton>
        <Grid Margin="20,5,5,5" IsEnabled="{Binding ElementName=_ctlUseCustomCredentialsSelected, Path=IsChecked}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Margin="5,5,5,5" Text="Password:" Style="{DynamicResource awsTextBlockBaseStyle}"/>
            <PasswordBox Grid.Row="0" Grid.Column="1" Margin="5,5,5,5" x:Name="_ctlEnteredPassword" PasswordChar="*" Style="{DynamicResource awsPasswordBoxStyle}"/>
            <CheckBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="5,5,5,5" 
                      IsChecked="{Binding SaveCredentials}"
                      Style="{DynamicResource awsCheckboxButtonBaseStyle}">
                Save Credentials
            </CheckBox>
        </Grid>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>
            
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Margin="5,5,5,5" Text="Location of Putty:" Style="{DynamicResource awsTextBlockBaseStyle}"/>
            <TextBox Grid.Row="0" Grid.Column="1" Margin="5,5,5,5" Text="{Binding ToolLocation}" Style="{DynamicResource awsTextBoxStyle}"/>
            <Button Grid.Row="0" Grid.Column="2"  Margin="5,5,5,5" Click="onToolBrowse">Browse...</Button>
            
            <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" TextWrapping="Wrap" Margin="10,3,10,3" Style="{DynamicResource awsFieldHintTextStyle}">
                AWS Toolkit uses the SSH client Putty to connect to EC2 instances.  Putty is a free SSH client that can be downloaded from the link below.
            </TextBlock>

            <TextBlock Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Margin="10,0,10,0" >
                <Hyperlink NavigateUri="http://www.chiark.greenend.org.uk/~sgtatham/putty/" RequestNavigate="onRequestToNavigate">
                    <TextBlock Text="http://www.chiark.greenend.org.uk/~sgtatham/putty/" Style="{DynamicResource awsUrlTextFieldStyle}"/>
                </Hyperlink>
            </TextBlock>

        </Grid>
        
    </StackPanel>
</local:OpenLinuxToolControl>
