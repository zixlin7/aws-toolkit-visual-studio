<commonui:BaseAWSUserControl
    x:Class="Amazon.AWSToolkit.EC2.View.Components.QuickLaunchAMIListControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:commonui="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:designData="clr-namespace:Amazon.AWSToolkit.EC2.View.DesignData"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkitThemes="clr-namespace:Amazon.AWSToolkit.Themes;assembly=AWSToolkit"
    d:DataContext="{d:DesignInstance designData:QuickLaunchDesignTimeData,
                                     IsDesignTimeCreatable=True}"
    Background="Transparent"
    mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Style x:Key="QuickLaunchListBoxItemStyle" TargetType="ListBoxItem">
                <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                <Setter Property="Margin" Value="4" />
                <Setter Property="TextBlock.Foreground" Value="{DynamicResource awsDefaultControlForegroundBrushKey}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border
                                x:Name="Root"
                                Padding="4"
                                Background="{DynamicResource awsListBoxPanelItemBackgroundBrushKey}"
                                BorderBrush="{DynamicResource awsListBoxPanelItemBackgroundBrushKey}"
                                BorderThickness="2"
                                CornerRadius="4">
                                <ContentPresenter
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Root" Property="BorderBrush" Value="{DynamicResource awsListBoxPanelItemHoverBorderBrushKey}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Root" Property="Background" Value="{DynamicResource awsListBoxPanelItemSelectedBorderBrushKey}" />
                                    <Setter Property="Background" Value="{DynamicResource awsListBoxPanelItemSelectedBackgroundBrushKey}" />
                                    <Setter Property="TextBlock.Foreground" Value="Black" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate x:Key="QuickLaunchItemTemplate">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <!--  need fixed width at present to force text to wrap  -->
                        <ColumnDefinition Width="450" />
                    </Grid.ColumnDefinitions>
                    <Image
                        Grid.RowSpan="2"
                        Width="16"
                        Height="16"
                        VerticalAlignment="Top"
                        Source="{Binding PlatformIcon, Mode=OneWay}" />

                    <Grid
                        Grid.Row="0"
                        Grid.Column="1"
                        Margin="4,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock
                            Margin="0"
                            VerticalAlignment="Center"
                            Style="{DynamicResource awsTextBlock122PercentStyle}"
                            Foreground="{TemplateBinding TextBlock.Foreground}"
                            Text="{Binding Title}"
                            TextTrimming="WordEllipsis"
                            TextWrapping="NoWrap" />
                        <StackPanel
                            Grid.Column="1"
                            Margin="8,0,0,0"
                            Orientation="Horizontal">
                            <RadioButton
                                Margin="5,0,5,0"
                                FontSize="{DynamicResource {x:Static toolkitThemes:ShellProviderThemeResources.EnvironmentFontSizeKey}}"
                                FontStyle="Italic"
                                FontWeight="SemiBold"
                                Foreground="{TemplateBinding TextBlock.Foreground}"
                                GroupName="ArchitectureType"
                                IsChecked="{Binding Is64BitSelected}"
                                IsEnabled="{Binding Is64BitEnabled}">
                                64 Bit
                            </RadioButton>
                            <RadioButton
                                Margin="5,0,5,0"
                                FontSize="{DynamicResource {x:Static toolkitThemes:ShellProviderThemeResources.EnvironmentFontSizeKey}}"
                                FontStyle="Italic"
                                FontWeight="SemiBold"
                                Foreground="{TemplateBinding TextBlock.Foreground}"
                                GroupName="ArchitectureType"
                                IsChecked="{Binding Is32BitSelected}"
                                IsEnabled="{Binding Is32BitEnabled}">
                                32 Bit
                            </RadioButton>
                        </StackPanel>
                    </Grid>

                    <Grid
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="4,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="29*" />
                            <ColumnDefinition Width="70*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock
                            Grid.ColumnSpan="2"
                            Margin="0,4,0,0"
                            Foreground="{TemplateBinding TextBlock.Foreground}"
                            Text="{Binding Description}"
                            TextWrapping="Wrap" />
                        <Image
                            Grid.Column="1"
                            Width="16"
                            Height="16"
                            Margin="0,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Source="..\..\Resources\Images\free_tier_eligible_sml.png"
                            ToolTip="Free tier eligible if used with a micro instance."
                            Visibility="{Binding FreeTier, Converter={StaticResource Bool2VisConverter}}" />
                    </Grid>
                </Grid>
            </DataTemplate>

            <ControlTemplate x:Key="QuickLaunchControlTemplate" TargetType="ListBox">
                <ScrollViewer
                    Padding="{TemplateBinding Padding}"
                    CanContentScroll="True"
                    Focusable="false"
                    HorizontalScrollBarVisibility="Hidden"
                    VerticalScrollBarVisibility="Auto">
                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                </ScrollViewer>
            </ControlTemplate>

        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel x:Name="_filterControls" Orientation="Horizontal">
            <Label
                Margin="0,-2,8,0"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabel122PercentStyle}">
                Filter:
            </Label>
            <RadioButton
                x:Name="_allPlatforms"
                Margin="0,0,8,0"
                Click="PlatformFilter_Click"
                FontSize="{DynamicResource {x:Static toolkitThemes:ShellProviderThemeResources.Environment122PercentFontSizeKey}}"
                GroupName="PlatformFilters"
                Style="{DynamicResource awsRadioButtonBaseStyle}"
                Tag="All">
                Show _all
            </RadioButton>
            <RadioButton
                x:Name="_linuxOnly"
                Margin="0,0,8,0"
                Click="PlatformFilter_Click"
                FontSize="{DynamicResource {x:Static toolkitThemes:ShellProviderThemeResources.Environment122PercentFontSizeKey}}"
                GroupName="PlatformFilters"
                Style="{DynamicResource awsRadioButtonBaseStyle}"
                Tag="Linux">
                _Linux only
            </RadioButton>
            <RadioButton
                x:Name="_windowsOnly"
                Click="PlatformFilter_Click"
                FontSize="{DynamicResource {x:Static toolkitThemes:ShellProviderThemeResources.Environment122PercentFontSizeKey}}"
                GroupName="PlatformFilters"
                Style="{DynamicResource awsRadioButtonBaseStyle}"
                Tag="Windows">
                _Windows only
            </RadioButton>
        </StackPanel>

        <Border
            Grid.Row="1"
            BorderBrush="{DynamicResource awsDefaultControlBorderBrushKey}"
            BorderThickness="2">
            <ListBox
                x:Name="_amiList"
                HorizontalContentAlignment="Stretch"
                ItemContainerStyle="{StaticResource QuickLaunchListBoxItemStyle}"
                ItemTemplate="{StaticResource QuickLaunchItemTemplate}"
                ItemsSource="{Binding}"
                SelectionChanged="_amiList_SelectionChanged"
                Template="{StaticResource QuickLaunchControlTemplate}" />
        </Border>
    </Grid>

</commonui:BaseAWSUserControl>
