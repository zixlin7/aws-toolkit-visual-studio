<commonui:BaseAWSControl x:Class="Amazon.AWSToolkit.EC2.View.CreateVolumeControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:commonui="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit" 
    xmlns:toolkitcomponents="clr-namespace:Amazon.AWSToolkit.CommonUI.Components;assembly=AWSToolkit"
    xmlns:local="clr-namespace:Amazon.AWSToolkit.EC2.View"
    Height="270" Width="350">

    <commonui:BaseAWSControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/DefaultTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="IopsFieldStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource awsTextBoxStyle}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </commonui:BaseAWSControl.Resources>
    
    <Grid Margin="4">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Grid.Column="0" Content="Size (_GB):"
               Target="{Binding ElementName=_sizeCtl}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <TextBox Margin="4" Grid.Row="0" Grid.Column="1" Text="{Binding Size}" Name="_sizeCtl" Style="{DynamicResource awsTextBoxStyle}"/>

        <Label Grid.Row="1" Grid.Column="0" Content="_Name:"
               Target="{Binding ElementName=_nameCtl}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <TextBox Margin="4" 
                 Grid.Row="1" 
                 Grid.Column="1" 
                 DataContext="{Binding Path=TagsModel}"
                 Name="_nameCtl"
                 Text="{Binding Path=NameTag, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                 Style="{DynamicResource awsTextBoxStyle}"/>

        <Label Grid.Row="2" Grid.Column="0" Content="Availability _Zone:"
               Target="{Binding ElementName=_zoneCtl}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <ComboBox Margin="4" Grid.Row="2" Grid.Column="1"  Name="_zoneCtl" 
                  ItemsSource="{Binding Path=AvailabilityZoneList}"
                  SelectedValue="{Binding Path=AvailabilityZone}"
                  Style="{DynamicResource awsComboBoxStyle}"/>

        <Label Grid.Row="3" Grid.Column="0" Content="_Snapshot:"
               Target="{Binding ElementName=_snapshotSelector}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <toolkitcomponents:ListViewComboBox 
                    Margin="4"
                    Grid.Column="1"
                    Grid.Row="3"
                    x:Name="_snapshotSelector"
                    VerticalAlignment="Center"
                    SelectionChanged="_snapCtl_SelectionChanged"
                    IsEditable="False"
                    ItemContainerStyle="{DynamicResource awsListViewItemContainerStyle}"
                    AlternationCount="2"
                    DisplayMemberPath="SnapshotId">
            <GridViewColumn Header="Snapshot Id" DisplayMemberBinding="{Binding SnapshotId}" />
            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="120" />
            <GridViewColumn Header="Size (GiB)" DisplayMemberBinding="{Binding Size}" />
            <GridViewColumn Header="Description" DisplayMemberBinding="{Binding Description}" />
        </toolkitcomponents:ListViewComboBox>

        <Label Grid.Row="4" Grid.Column="0" Content="_Device Name:" Name="_ctlDeviceLabel"
               Target="{Binding ElementName=_ctlDevice}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <ComboBox Margin="4" Grid.Row="4" Grid.Column="1" Name="_ctlDevice" IsEditable="True"
                  ItemsSource="{Binding InstanceToAttach.UnmappedDeviceSlots}" 
                  Text="{Binding Device}"
                  Style="{DynamicResource awsComboBoxStyle}"/>

        <Label Grid.Row="5" Content="Volume _Type:" 
               Target="{Binding ElementName=_ctlVolumeType}"
               Style="{DynamicResource awsLabelBaseStyle}"/>
        <ComboBox Grid.Row="5" 
                  Grid.Column="1" 
                  Margin="4"
                  Name="_ctlVolumeType" 
                  IsEditable="False"
                  HorizontalAlignment="Stretch"
                  ItemsSource="{Binding Path=VolumeTypes}"
                  SelectedValue="{Binding Path=VolumeType}"
                  SelectionChanged="_ctlVolumeType_OnSelectionChanged"
                  DisplayMemberPath="TypeName"
                  Style="{DynamicResource awsComboBoxStyle}"/>
        
        <Grid Grid.Row="6" 
              Grid.Column="1" 
              >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
            </Grid.ColumnDefinitions>
            <Label Margin="3,0,2,0" 
                   Content="_IOPS:" 
                   Name="_ctlIopsLabel"
                   Target="{Binding ElementName=_ctlIops}"
                   Style="{DynamicResource awsLabelBaseStyle}"
                   />
            <TextBox Margin="2,0,4,0" 
                     Grid.Column="1" 
                     x:Name="_ctlIops" 
                     HorizontalAlignment="Stretch"
                     Style="{StaticResource IopsFieldStyle}" 
                     VerticalAlignment="Center">
                <TextBox.Text>
                    <Binding Path="Iops">
                        <Binding.ValidationRules>
                            <local:IopsRangeValidationRule MinimumValue="100" MaximumValue="4000" />    
                        </Binding.ValidationRules>
                    </Binding>                        
                </TextBox.Text>
            </TextBox>
            <TextBlock Margin="4" 
                       Grid.Row="1" 
                       Grid.ColumnSpan="3" 
                       HorizontalAlignment="Stretch" 
                       VerticalAlignment="Top"
                       TextWrapping="Wrap"
                       Style="{DynamicResource awsFieldHintTextStyle}" FontStyle="Italic">
                IOPS applies to volumes of type 'io.1'. Valid range 100 to 4000.
            </TextBlock>
        </Grid>

    </Grid>
</commonui:BaseAWSControl>
