<commonUi:BaseAWSUserControl 
    x:Class="Amazon.AWSToolkit.ElasticBeanstalk.WizardPages.PageUI.Deployment.ApplicationPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:commonUi="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
    xmlns:validators="clr-namespace:Amazon.AWSToolkit.ElasticBeanstalk.WizardPages.Validators"
    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="600">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/DefaultTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Style="{DynamicResource awsWizardGroupHeaderStyle}"
                   Grid.ColumnSpan="2">
                Application
            </Label>

            <Label Style="{DynamicResource awsWizardFieldLabelStyle}"
                   Grid.Row="1" Grid.Column="0"
                   Target="{Binding ElementName=_applicationName}"
                   Margin="16,0,4,0">
                N_ame:
            </Label>
            <ComboBox 
                      Grid.Row="1"
                      Grid.ColumnSpan="2"
                      Style="{DynamicResource awsComboBoxStyle}"
                      IsEditable="True"
                      ItemsSource="{Binding DeployedApplicationNames}"
                      HorizontalAlignment="Left"
                      MinWidth="400"
                      Margin="63,3,0,3"
                      x:Name="_applicationName"
                      >
                <ComboBox.Text>
                    <Binding Path="ApplicationName" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <validators:ApplicationNameValidator />
                        </Binding.ValidationRules>
                    </Binding>
                </ComboBox.Text>
            </ComboBox>
        </Grid>

        <Grid Grid.Row="1" Margin="4,16,4,2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Label Style="{DynamicResource awsWizardGroupHeaderStyle}"
                   Grid.ColumnSpan="2">
                Environment
            </Label>

            <Label Style="{DynamicResource awsWizardFieldLabelStyle}"
                   Grid.Row="1" 
                   Grid.Column="0"
                   Target="{Binding ElementName=_environmentName}"
                   Margin="16,0,4,0">
                Nam_e:
            </Label>
            <ComboBox 
                      Grid.Row="1"
                      Grid.Column="1"
                      Style="{DynamicResource awsComboBoxStyle}"
                      IsEditable="True"
                      HorizontalAlignment="Left"
                      MinWidth="400"
                      ItemsSource="{Binding EnvironmentNamePresets}"
                      x:Name="_environmentName"
                      >
                <ComboBox.Text>
                    <Binding Path="EnvironmentName" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <validators:EnvironmentNameValidator />
                        </Binding.ValidationRules>
                    </Binding>
                </ComboBox.Text>
            </ComboBox>

            <TextBlock x:Name="_envNameValidationMsg" 
                       Margin="2" 
                       Grid.Row="2"
                       Grid.Column="1"
                       FontStyle="Italic"
                       Foreground="Red"
                       VerticalAlignment="Center"
                       Visibility="Hidden"  
                       Style="{DynamicResource awsTextBlockBaseStyle}"
                       />
        </Grid>

        <Grid Grid.Row="2" Margin="4,16,4,2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Label Style="{DynamicResource awsWizardGroupHeaderStyle}" 
                   Grid.Row="0" Grid.ColumnSpan="4">
                URL
            </Label>

            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <Grid x:Name="_cnameEntryPanel">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock VerticalAlignment="Bottom" 
                               Margin="16,0,4,0" 
                               FontStyle="Italic" 
                               Style="{DynamicResource awsTextBlockBaseStyle}" 
                               Text="http:"
                               />
                    <TextBox Grid.Column="1" 
                             VerticalAlignment="Center" 
                             MaxLength="63" 
                             MinWidth="300"
                             Width="300"
                             Style="{DynamicResource awsTextBoxStyle}"
                             HorizontalAlignment="Left"
                             >
                        <TextBox.Text>
                            <Binding Path="CName" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <validators:CNameValidator />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                    <TextBlock VerticalAlignment="Bottom" 
                               Margin="4,0,4,0"  
                               Grid.Column="2" 
                               FontStyle="Italic" 
                               Style="{DynamicResource awsTextBlockBaseStyle}"
                               Text=".elasticbeanstalk.com"
                               HorizontalAlignment="Left"
                               />
                    <Button Grid.Column="3" 
                            Margin="16,0,4,0" 
                            Padding="4,0"
                            x:Name="_btnCheckAvailability" 
                            Click="_btnCheckAvailability_Click" 
                            IsEnabled="False">
                        Check _availability...
                    </Button>
                </Grid>

                <Grid x:Name="_cnameValidationResultPanel" 
                      Grid.Row="1"
                      Margin="16,4,4,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Image x:Name="_validateOKImg" 
                           Source="/AWSToolkit.ElasticBeanstalk;component/Resources/EmbeddedImages/Validated.png" 
                           Visibility="Collapsed" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center" 
                           />
                    <Image Grid.Column="1" 
                           x:Name="_validateFailImg" 
                           Source="/AWSToolkit.ElasticBeanstalk;component/Resources/EmbeddedImages/Failed.png" 
                           Visibility="Collapsed" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center" 
                           />
                    <TextBlock Grid.Column="2" 
                               x:Name="_urlValidatedMsg" 
                               Visibility="Hidden" 
                               FontStyle="Italic" 
                               Margin="0,4,0,0"  
                               Style="{DynamicResource awsTextBlockBaseStyle}"
                               />
                </Grid>
            </Grid>

        </Grid>

    </Grid>
</commonUi:BaseAWSUserControl>
