<commonUi:BaseAWSUserControl x:Class="Amazon.AWSToolkit.ECS.WizardPages.PageUI.ConfigureLoadBalancerPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Amazon.AWSToolkit.ECS.WizardPages.PageUI"
             mc:Ignorable="d"
             xmlns:commonUi="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
             d:DesignHeight="400" d:DesignWidth="600">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/DefaultTheme.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <CheckBox 
                Grid.Row="0" 
                Name="_ctlConfigureLoadBalancer"
                >Configure Application Load Balancer</CheckBox>

            <TextBlock
                Grid.Row="1"
                Margin="16,5,4,0"
                FontStyle="Italic"
                Style="{DynamicResource awsInfoTextStyle}"
                TextWrapping="Wrap">
                It is recommended for web applications to use an Application Load Balancer 
                which allows containers to use dynamic host port mapping. This will give 
                the ability to run multiple instances of the web applications on the same
                container host without contention for port 80.
            </TextBlock>

        </Grid>
        <Grid Grid.Row="1" IsEnabled="{Binding IsChecked, ElementName=_ctlConfigureLoadBalancer}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Label
                Grid.Row="0"
                Grid.Column="0"
                Margin="10,2,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Select IAM role for service:
            </Label>

            <ComboBox
                Name="_ctlServiceIAMRole"
                Grid.Row="0"
                Grid.Column="1"
                Margin="16,2,4,2"
                SelectionChanged="_ctlServiceIAMRole_SelectionChanged"
                Style="{DynamicResource awsComboBoxStyle}"/>

            <Label
                Grid.Row="1"
                Grid.Column="0"
                Margin="10,2,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Load Balancer:
            </Label>

            <ComboBox
                Name="_ctlLoadBalancer"
                Grid.Row="1"
                Grid.Column="1"
                Margin="16,2,4,2"
                SelectionChanged="_ctlLoadBalancer_SelectionChanged"
                Style="{DynamicResource awsComboBoxStyle}"/>

            <TextBox
                Name="_ctlNewLoadBalancerName"
                Grid.Row="1"
                Grid.Column="2"
                Margin="4,2,4,2"
                IsEnabled="False"
                Style="{DynamicResource awsTextBoxStyle}"
                Text="{Binding NewLoadBalancerName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                />

            <Label
                Grid.Row="3"
                Grid.Column="0"
                Margin="10,2,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Listener Port:
            </Label>

            <ComboBox
                Name="_ctlListenerPorts"
                Grid.Row="3"
                Grid.Column="1"
                Margin="16,2,4,2"
                SelectionChanged="_ctlListenerPorts_SelectionChanged"
                Style="{DynamicResource awsComboBoxStyle}"/>

            <TextBox
                Name="_ctlNewListenerPort"
                Grid.Row="3"
                Grid.Column="2"
                Margin="4,2,4,2"
                IsEnabled="False"
                Style="{DynamicResource awsTextBoxStyle}"
                Text="{Binding NewListenerPort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                />

            <Label
                Grid.Row="4"
                Grid.ColumnSpan="2"
                Style="{DynamicResource awsWizardGroupSubHeaderStyle}">
                Load Balancer Target Group
            </Label>

            <TextBlock
                Grid.Row="5"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Margin="16,2,4,0"
                FontStyle="Italic"
                Style="{DynamicResource awsInfoTextStyle}"
                TextWrapping="Wrap">
                The Application Load Balancer will send requests to the Target Group 
                if the request matches the specified URL path pattern. Amazon ECS will 
                register all instances of the container with their dynamic port to the 
                Target Group using the provided IAM role for the service.
            </TextBlock>

            <Label
                Grid.Row="6"
                Grid.Column="0"
                Margin="10,4,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Target Group:
            </Label>

            <ComboBox
                Name="_ctlTargetGroup"
                Grid.Row="6"
                Grid.Column="1"
                Margin="16,4,4,2"
                SelectionChanged="_ctlTargetGroup_SelectionChanged"
                Style="{DynamicResource awsComboBoxStyle}"/>

            <TextBox
                Name="_ctlNewTargetGroupName"
                Grid.Row="6"
                Grid.Column="2"
                Margin="4,2,4,2"
                IsEnabled="False"
                Style="{DynamicResource awsTextBoxStyle}"
                Text="{Binding NewTargetGroupName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                />


            <Label
                Grid.Row="7"
                Grid.Column="0"
                Margin="10,2,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Path Pattern:
            </Label>

            <TextBox
                Name="_ctlPathPattern"
                Grid.Row="7"
                Grid.Column="1"
                Margin="16,2,4,2"
                Style="{DynamicResource awsTextBoxStyle}"
                Text="{Binding PathPattern, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                />

            <Label
                Grid.Row="8"
                Grid.Column="0"
                Margin="10,2,4,2"
                VerticalAlignment="Center"
                Style="{DynamicResource awsLabelBaseStyle}">
                Health Check Path:
            </Label>

            <TextBox
                Name="_ctlHealthCheckPath"
                Grid.Row="8"
                Grid.Column="1"
                Margin="16,2,4,2"
                Style="{DynamicResource awsTextBoxStyle}"
                Text="{Binding HealthCheckPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                />

        </Grid>
    </Grid>
</commonUi:BaseAWSUserControl>
