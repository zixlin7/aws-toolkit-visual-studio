<commonui:BaseAWSUserControl 
    x:Class="Amazon.AWSToolkit.ElasticBeanstalk.WizardPages.PageUI.Deployment.CoreCLRApplicationOptionsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:commonui="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
    xmlns:toolkitcomponents="clr-namespace:Amazon.AWSToolkit.CommonUI.Components;assembly=AWSToolkit"
    xmlns:validators="clr-namespace:Amazon.AWSToolkit.ElasticBeanstalk.WizardPages.Validators"
    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="500">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/DefaultTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"  />
            <RowDefinition Height="Auto"  />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        
        <Grid Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"  />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width=".5*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width=".5*" />
            </Grid.ColumnDefinitions>

            <Label Style="{DynamicResource awsWizardGroupHeaderStyle}"
                   Grid.ColumnSpan="2"
                   Margin="0,8,0,0"
                   >
                Build and Deployment Settings
            </Label>

            <Label Grid.Row="1" 
                   Grid.Column="0"
                   Margin="8,2,4,0"
                   Content="Project _build configuration:"
                   x:Name="_buildConfigurationsLabel"
                   />

            <ComboBox Grid.Row="1" 
                      Grid.Column="1"
                      Style="{DynamicResource awsComboBoxStyle}"
                      ItemsSource="{Binding BuildConfigurations}"
                      SelectedItem="{Binding SelectedBuildConfiguration}"
                      x:Name="_buildConfigurations"
                      />

            <Label Target="{Binding ElementName=_targetFramework}"
                   Grid.Row="2"
                   Style="{DynamicResource awsWizardFieldLabelStyle}"
                   Margin="8,2,4,0"
                   Content="_Framework:"
                   />
            
            <Grid Grid.Row="2" Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ComboBox x:Name="_targetFramework"
                          Style="{DynamicResource awsComboBoxStyle}"/>
            </Grid>

            <Label Target="{Binding ElementName=_iisAppPath}"
                   Grid.Row="3"
                   Grid.Column="0"
                   Style="{DynamicResource awsWizardFieldLabelStyle}"
                   Margin="8,2,4,0"
                   Content="App path:"
                   x:Name="_iisAppPathLabel"
                   />

            <TextBox Grid.Row="3"
                     Grid.Column="1"
                     Grid.ColumnSpan="3"
                     Style="{DynamicResource awsTextBoxStyle}"
                     x:Name="_iisAppPath"
                     Margin="0,0,8,0"
                     Text="{Binding IISAppPath}"
                     />
        </Grid>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"  />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Label Style="{DynamicResource awsWizardGroupHeaderStyle}"
                   Margin="0,12,0,0"
                   >
                Application Settings
            </Label>

            <Grid x:Name="_healthCheckViaURLPanel" Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Target="{Binding ElementName=_healthCheckURL}" 
                       Style="{DynamicResource awsWizardFieldLabelStyle}"
                       Margin="8,2,4,0" 
                       Content="_Health check URL:" 
                       />

                <TextBlock x:Name="_healthCheckFromInstanceMsg"
                           Grid.Column="1"
                           Grid.ColumnSpan="2"
                           Margin="4,2,8,0"
                           Visibility="Hidden"
                           FontStyle="Italic"
                           Style="{DynamicResource awsInfoTextStyle}">
                    The status of the single EC2 instance is used to determine environment health.
                </TextBlock>

                <TextBlock Grid.Column="1"
                           VerticalAlignment="Center"
                           Margin="4,0"
                           FontWeight="ExtraBold"
                           Foreground="Red"
                           Text="!"
                           ToolTip="The relative Uri specified for the health check page is not valid or is empty."
                           Visibility="Collapsed"
                           x:Name="_healthCheckURLInvalid"/>

                <TextBox x:Name="_healthCheckURL" 
                         Grid.Column="2"
                         Margin="4,0,8,0"
                         TextChanged="_healthCheckURL_TextChanged"
                         Style="{DynamicResource awsTextBoxStyle}"
                         >
                    <TextBox.Text>
                        <Binding Path="HealthCheckUri" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Grid>

            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Target="{Binding ElementName=_versionLabel}" 
                       Style="{DynamicResource awsWizardFieldLabelStyle}"
                       Margin="8,2,4,0" 
                       Content="Deployment _version label:" 
                       />

                <TextBlock Grid.Column="1"
                           VerticalAlignment="Center"
                           Margin="4,0"
                           FontWeight="ExtraBold"
                           Foreground="Red"
                           Text="!"
                           ToolTip="Version label may not be empty or used previously."
                           Visibility="Collapsed"
                           x:Name="_versionLabelInvalid"/>

                <TextBox Margin="4,0,8,0"
                        Grid.Column="2" 
                        Name="_versionLabel" 
                        TextChanged="_versionLabel_OnTextChanged"
                        ToolTip="A label identifying this version"
                        Style="{DynamicResource awsTextBoxStyle}"
                        >
                    <TextBox.Text>
                        <Binding Path="DeploymentVersionLabel" 
                                    Mode="TwoWay" 
                                    UpdateSourceTrigger="PropertyChanged">
                            <!--<Binding.ValidationRules>
                                <validators:DeploymentVersionLabelValidator />
                            </Binding.ValidationRules>-->
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Grid>
        </Grid>

        <Grid Grid.Row="2">
            <TextBlock Style="{DynamicResource awsInfoTextStyle}"
                        Margin="2,10,2,2"
                        TextWrapping="Wrap"
                        >
            NOTE: Changes have been announced for .NET Core project files and the use of project.json. This wizard will be updated to be compatible with the upcoming changes which might break compatiblity with older project files.
            </TextBlock>
        </Grid>

    </Grid>

</commonui:BaseAWSUserControl>
