<commonui:BaseAWSControl x:Class="Amazon.AWSToolkit.EC2.View.CreateVPCControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             xmlns:commonui="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"  
             xmlns:awstoolkitcomponents="clr-namespace:Amazon.AWSToolkit.CommonUI.Components;assembly=AWSToolkit"
            Loaded="onLoad"                         
            Height="450" Width="500">
    
    <commonui:BaseAWSControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/AWSToolkit;component/Themes/DefaultTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </commonui:BaseAWSControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Margin="4,4,4,1" Grid.Row="0" Grid.Column="0" Text="Name:" Style="{DynamicResource awsTextBlockBaseStyle}" 
                   ToolTip="Optional name assigned to the Name tag of the VPC"/>
        <TextBox Margin="4,4,4,1" Grid.Row="0" Grid.Column="1" Text="{Binding VPCName}" Name="_ctlName" Style="{DynamicResource awsTextBoxStyle}"/>

        <TextBlock Margin="4,4,4,1" Grid.Row="1" Grid.Column="0" Style="{DynamicResource awsTextBlockBaseStyle}" Text="CIDR Block*:"
                   ToolTip="The CIDR block you want the VPC to cover (for example, 10.0.0.0/16)."/>
        <TextBox Margin="4,4,4,1" Grid.Row="1" Grid.Column="1" Text="{Binding CIDRBlock}" Name="_ctlCIDRBlock" Style="{DynamicResource awsTextBoxStyle}"/>

        <TextBlock Margin="4,4,4,1" Grid.Row="2" Grid.Column="0" Text="Tenancy:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="A value of dedicated means all instances in the VPC run on single-tenant hardware for an extra cost."/>
        
        <ComboBox Margin="4,4,4,1" Grid.Row="2" Grid.Column="1" Text="{Binding InstanceTenancy}" Style="{DynamicResource awsComboBoxStyle}">
            <ComboBoxItem>default</ComboBoxItem>
            <ComboBoxItem>dedicated</ComboBoxItem>
        </ComboBox>

        <TextBlock Grid.Row="3" Grid.Column="0" 
                   Text="DNS:" 
                   Margin="4,8,4,1" 
                   Style="{DynamicResource awsTextBlockBaseStyle}" />
        
        <StackPanel Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" 
                    Orientation="Horizontal"
                    HorizontalAlignment="Left">
            <CheckBox IsChecked="{Binding EnableDNSHostnames}"
                      ToolTip="Indicates whether the instances launched in the VPC get DNS hostnames."
                      Content="Enable DNS hostnames"
                      Style="{DynamicResource awsCheckboxButtonBaseStyle}"
                      Margin="4,8,4,2"/>

            <CheckBox IsChecked="{Binding EnableDNSSupport}"
                      ToolTip="Indicates whether the DNS resolution is supported for the VPC."
                      Content="Enable DNS resolution"
                      Style="{DynamicResource awsCheckboxButtonBaseStyle}"
                      Margin="20,8,4,2"/>
        </StackPanel>

        <TextBlock Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3"
                   Style="{DynamicResource awsTextBlockBaseStyle}"
                   FontStyle="Italic"
                   TextWrapping="Wrap"
                   Margin="4,2"
                   Text="If the VPC will host a publicly accessible RDS database instance, both DNS options should be selected."/>
        
        <DockPanel Grid.Row="5" Grid.ColumnSpan="4">
            <CheckBox DockPanel.Dock="Left" Margin="5" 
                      IsChecked="{Binding WithPublicSubnet}" Name="_ctlWithPublic" 
                      Click="_ctlWithPublic_Click"
                      Style="{DynamicResource awsCheckboxButtonBaseStyle}">
                With Public Subnet
            </CheckBox>
            <Separator Margin="5"/>
        </DockPanel>

        <TextBlock Margin="15,4,4,1" Grid.Row="6" Grid.Column="0" Text="Public Subnet:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The CIDR block for the subnet to cover (for example, 10.0.0.0/24)"/>
        <TextBox Margin="4,4,4,1" Grid.Row="6" Grid.Column="1" Text="{Binding PublicSubnetCIDRBlock}" 
                 IsEnabled="{Binding ElementName=_ctlWithPublic,Path=IsChecked}"
                 Style="{DynamicResource awsTextBoxStyle}"/>

        <TextBlock Margin="15,4,4,1" Grid.Row="6" Grid.Column="2" Text="Availablity Zone:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The Availability Zone for the subnet."/>
        <ComboBox Margin="4,4,4,1" Grid.Row="6" Grid.Column="3" SelectedItem="{Binding PublicSubnetAvailabilityZone}" 
                  ItemsSource="{Binding AvailableZones}" IsEnabled="{Binding ElementName=_ctlWithPublic,Path=IsChecked}"
                  Style="{DynamicResource awsComboBoxStyle}"/>

        <TextBlock Margin="5,10,5,5" Grid.Row="7" Grid.ColumnSpan="4" TextWrapping="Wrap" Style="{DynamicResource awsFieldHintTextStyle}" FontStyle="Italic">
            A subnet will be added to the VPC with an internet gateway associated to it.  This will allow instances in this subnet access to the internet.
        </TextBlock>

        <DockPanel Grid.Row="8" Grid.ColumnSpan="4">
            <CheckBox DockPanel.Dock="Left" Margin="5" IsEnabled="False" 
                      IsChecked="{Binding WithPrivateSubnet}" 
                      Name="_ctlWithPrivate"
                      Style="{DynamicResource awsCheckboxButtonBaseStyle}">
                With Private Subnet
            </CheckBox>
            <Separator Margin="5"/>
        </DockPanel>

        <TextBlock Margin="15,4,4,1" Grid.Row="9" Grid.Column="0" Text="Private Subnet:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The CIDR block for the subnet to cover (for example, 10.0.0.0/24)"/>
        <TextBox Margin="4,4,4,1" Grid.Row="9" Grid.Column="1" Text="{Binding PrivateSubnetCIDRBlock}" 
                 IsEnabled="{Binding ElementName=_ctlWithPrivate,Path=IsChecked}"
                 Style="{DynamicResource awsTextBoxStyle}"/>

        <TextBlock Margin="15,4,4,1" Grid.Row="9" Grid.Column="2" Text="Availablity Zone:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The Availability Zone for the subnet."/>
        <ComboBox Margin="4,4,4,1" Grid.Row="9" Grid.Column="3" SelectedItem="{Binding PrivateSubnetAvailabilityZone}" 
                  ItemsSource="{Binding AvailableZones}" IsEnabled="{Binding ElementName=_ctlWithPrivate,Path=IsChecked}"
                  Style="{DynamicResource awsComboBoxStyle}"/>

        <TextBlock Margin="15,4,4,1" Grid.Row="11" Grid.Column="0" Text="NAT Instance Type:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The instance type for the EC2 instance created for the NAT"/>
        <awstoolkitcomponents:ListViewComboBox 
                Margin="4,4,4,1"
                Grid.Row="11"
                Grid.Column="1"
                x:Name="_instanceTypeSelector"
                VerticalAlignment="Center"
                HorizontalAlignment="Stretch"
                IsEnabled="{Binding ElementName=_ctlWithPrivate,Path=IsChecked}"
                ItemsSource="{Binding InstanceTypes}"
                SelectedItem="{Binding NATInstanceType}"
                DisplayMemberPath="DisplayName">
            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Id}" />
            <GridViewColumn Header="Requires VPC" DisplayMemberBinding="{Binding RequiresVPC}" />
            <GridViewColumn Header="vCPU" DisplayMemberBinding="{Binding NumberOfVirtualCores}" />
            <GridViewColumn Header="Memory" DisplayMemberBinding="{Binding MemoryWithUnits}" />
            <GridViewColumn Header="Disk Space" DisplayMemberBinding="{Binding DiskSpaceWithUnits}" />
        </awstoolkitcomponents:ListViewComboBox>


        <TextBlock Margin="15,4,4,1" Grid.Row="11" Grid.Column="2" Text="NAT Key Pair Name:" Style="{DynamicResource awsTextBlockBaseStyle}"
                   ToolTip="The EC2 Key Pair assigned to the EC2 instances created for the NAT"/>
        <ComboBox Margin="4,4,4,1" Grid.Row="11" Grid.Column="3" SelectedItem="{Binding NATKeyPairName}" ItemsSource="{Binding KeyPairNames}" 
                  IsEnabled="{Binding ElementName=_ctlWithPrivate,Path=IsChecked}"
                  Style="{DynamicResource awsComboBoxStyle}"/>

        <CheckBox Margin="15,4,4,1" Grid.Row="12" Grid.ColumnSpan="4" 
                  IsChecked="{Binding ConfigureDefaultVPCGroupForNAT}" IsEnabled="{Binding ElementName=_ctlWithPrivate,Path=IsChecked}"
                  ToolTip="Creates a security group that will be given permission to the NAT instance.  This group can then be used when launching new EC2 instances in the private subnet."
                  Style="{DynamicResource awsCheckboxButtonBaseStyle}">
            Configure default security group to allow traffic to NAT
        </CheckBox>

        <TextBlock Margin="5,10,5,5" Grid.Row="13" Grid.ColumnSpan="4" TextWrapping="Wrap" Style="{DynamicResource awsFieldHintTextStyle}" FontStyle="Italic">
            Instances in the private subnet can establish outbound connections to the Internet via the public subnet using Network Address Translation. (Hourly charges for NAT instances apply)
        </TextBlock>

        <TextBlock Margin="5,10,5,5" Grid.Row="14" Grid.ColumnSpan="4" TextWrapping="Wrap" Style="{DynamicResource awsFieldHintTextStyle}">
            Creation of public or private subnets will be performed in the background.  To check the status view the output window.
        </TextBlock>        
    </Grid>
</commonui:BaseAWSControl>
