AWSTemplateFormatVersion: 2010-09-09
Description: Example CloudFormation template that contains short form notation
Parameters:
    Stage:
        Default: dev
        Type: String
        Description: Example parameter 1
        AllowedValues:
            - dev
            - prod
        MinLength: 3
        MaxLength: 10
    ResourcePrefix:
        Default: foo
        Type: String
        Description: Prefix applied to created resources
Resources:
    UsersTable:
        Type: "AWS::DynamoDB::Table"
        Properties:
            AttributeDefinitions:
                - AttributeName: userId
                  AttributeType: S
            KeySchema:
                - AttributeName: userId
                  KeyType: HASH
            ProvisionedThroughput:
                ReadCapacityUnits: 2
                WriteCapacityUnits: 1
            Tags:
                - Key: keyname1
                  Value: value1
                - Key: keyname2
                  Value: value2
            TableName: !Sub
                - ${prefix}-${stage}-users
                - prefix: !Ref ResourcePrefix
                  stage: !Ref Stage
Outputs:
    UserTableName:
        Description: Users DynamoDB Table Name
        Value: !Ref UsersTable
    Stage:
        Description: Deployment stage
        Value: !Ref Stage
