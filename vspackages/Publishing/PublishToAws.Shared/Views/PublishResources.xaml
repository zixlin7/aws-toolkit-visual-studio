<UserControl x:Class="Amazon.AWSToolkit.Publish.Views.PublishResources"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:themes="clr-namespace:Amazon.AWSToolkit.Themes;assembly=AWSToolkit"
             xmlns:models="clr-namespace:Amazon.AWSToolkit.Publish.Models"
             xmlns:commonUi="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
             xmlns:designData="clr-namespace:Amazon.AWSToolkit.Publish.Views.DesignData"
             xmlns:images="clr-namespace:Amazon.AWSToolkit.CommonUI.Images;assembly=AWSToolkit"
             themes:ToolkitThemes.UseToolkitTheme="True"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance Type=designData:DesignSamplePublishProjectViewModel, IsDesignTimeCreatable=True}">
    <UserControl.Resources>
        <ResourceDictionary>
            <commonUi:VsImages x:Key="VsImages" />
            <!-- 
                This section of the file defines the "editors" used for each data type used by Publish Resource data. 
                Everything is tied together by PublishResourceTemplateSelector, which is used in the Application View to 
                select the appropriate control for rendering for each publish resource data.
            -->
            <DataTemplate x:Key="TextEditor" DataType="{x:Type system:String}">
                <TextBlock
                    TextWrapping="Wrap"
                    HorizontalAlignment="Left"
                    Text="{Binding .}" />
            </DataTemplate>

            <DataTemplate x:Key="LinkEditor" DataType="{x:Type system:String}">
                <TextBlock
                    TextWrapping="Wrap"
                    HorizontalAlignment="Left">
                    <Hyperlink
                        NavigateUri="{Binding .}"
                        RequestNavigate="OnResourceLinkNavigate">
                        <Run Text="{Binding .}"/>
                    </Hyperlink>
                </TextBlock>

            </DataTemplate>

            <models:PublishResourceTemplateSelector
                x:Key="PublishResourceTemplateSelector"
                TextEditor="{StaticResource TextEditor}"
                LinkEditor="{StaticResource LinkEditor}" />

            <!--Publish Resource Template-->

            <DataTemplate x:Key="PublishResourceTemplate" DataType="{x:Type models:PublishResource}">

                <Grid Margin="0 0 0 12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock
                            FontWeight="SemiBold"
                            HorizontalAlignment="Left"
                            TextWrapping="Wrap"
                            Text="{Binding Description}" />

                        <TextBlock
                            TextWrapping="Wrap"
                            HorizontalAlignment="Left"
                            Foreground="{DynamicResource {x:Static themes:ToolkitThemes.HintTextBrushKey}}"
                            Text="{Binding Type}" />
                    </StackPanel>

                    <TextBlock
                        Grid.Row="1"
                        HorizontalAlignment="Left"
                        TextWrapping="Wrap"
                        Text="{Binding Id}" />
                    <ItemsControl
                        Grid.Row="2"
                        HorizontalContentAlignment="Stretch"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ItemsSource="{Binding Data}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>

                                <Grid Margin ="12 12 12 0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <TextBlock
                                        Grid.Row="0"
                                        TextWrapping="Wrap"
                                        HorizontalAlignment="Left"
                                        Text="{Binding Key, StringFormat={}{0}:}" />

                                    <ContentControl
                                        Grid.Row="1"
                                        Content="{Binding Value}"
                                        ContentTemplateSelector="{DynamicResource PublishResourceTemplateSelector}" />
                                </Grid>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>

    <Border
        BorderThickness="1" Padding="1"
        BorderBrush="{DynamicResource {x:Static themes:ToolkitThemes.ToolTipBorderBrushKey}}">
        <ScrollViewer
            VerticalScrollBarVisibility="Auto"
            Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock
                        Grid.Row="0" Grid.Column="0"
                        VerticalAlignment="Top"
                        FontWeight="Bold"
                        >
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Text" Value="Artifact" />
                                <Style.Triggers>
                                    <DataTrigger 
                                        Binding="{Binding ArtifactType}" 
                                        Value="{x:Static models:DeploymentArtifact.CloudFormationStack}">
                                        <Setter Property="Text" Value="CloudFormation stack" />
                                    </DataTrigger>
                                    <DataTrigger 
                                        Binding="{Binding ArtifactType}" 
                                        Value="{x:Static models:DeploymentArtifact.BeanstalkEnvironment}" >
                                        <Setter Property="Text" Value="Beanstalk environment" />
                                    </DataTrigger>
                                    <DataTrigger 
                                        Binding="{Binding ArtifactType}" 
                                        Value="{x:Static models:DeploymentArtifact.ElasticContainerRegistry}" >
                                        <Setter Property="Text" Value="ECR Repository" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <TextBlock
                        Grid.Row="1" Grid.Column="0"
                        Margin="0 6 0 0"
                        TextWrapping="Wrap">
                          <Hyperlink
                            Command="{Binding ViewPublishedArtifactCommand}">
                              <Run Text="{Binding PublishedArtifactId}" />
                          </Hyperlink>
                    </TextBlock>

                </Grid>

                <Grid
                    Row="1"
                    Margin="0 12 0 0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <StackPanel
                        Grid.Row="0" Grid.Column="0"
                        Orientation="Horizontal"
                        >
                        <TextBlock
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Text="Created resources" />
                        <Button
                            Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}"
                            Margin="6 0 0 0"
                            VerticalAlignment="Center"
                            Command="{Binding CopyToClipboardCommand}"
                            ToolTip="Copy To Clipboard"
                            >
                            <images:VsImage
                                Width="16"
                                Height="16"
                                Source="{Binding Source={StaticResource VsImages}, Path=Copy}" />
                        </Button>
                    </StackPanel>

                    <ItemsControl
                        Grid.Row="1"
                        Margin="0 6 0 0"
                        HorizontalContentAlignment="Stretch"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ItemTemplate="{StaticResource PublishResourceTemplate}"
                        ItemsSource="{Binding PublishResources}" />

                </Grid>
            </Grid>
        </ScrollViewer>
    </Border>
</UserControl>
