<commonUi:BaseAWSControl
    x:Class="Amazon.AWSToolkit.VisualStudio.GettingStarted.GettingStartedView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Amazon.AWSToolkit.VisualStudio.GettingStarted"
    xmlns:wizBehaviors="clr-namespace:Amazon.AWSToolkit.CommonUI.CredentialProfiles.AddEditWizard.Behaviors;assembly=AWSToolkit"
    xmlns:commonUi="clr-namespace:Amazon.AWSToolkit.CommonUI;assembly=AWSToolkit"
    xmlns:themes="clr-namespace:Amazon.AWSToolkit.Themes;assembly=AWSToolkit"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:images="clr-namespace:Amazon.AWSToolkit.CommonUI.Images;assembly=AWSToolkit"
    xmlns:wizard="clr-namespace:Amazon.AWSToolkit.CommonUI.CredentialProfiles.AddEditWizard;assembly=AWSToolkit"
    themes:ToolkitThemes.UseToolkitTheme="True"
    d:DesignHeight="600"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <commonUi:BaseAWSUserControl.Resources>
        <ResourceDictionary>
            <commonUi:ToolkitImages x:Key="ToolkitImages" />
            <commonUi:VsImages x:Key="VsImages" />
        </ResourceDictionary>
    </commonUi:BaseAWSUserControl.Resources>

    <ScrollViewer>
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MaxWidth="650" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Grid
                Grid.Row="0"
                Grid.ColumnSpan="2"
                Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <images:VsImage
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.RowSpan="2"
                    Source="{Binding Source={StaticResource ToolkitImages}, Path=Aws}"
                    Width="64"
                    Height="64"
                    Margin="3"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left" />

                <TextBlock
                    Grid.Row="0"
                    Grid.Column="1"
                    Margin="12 0 0 0"
                    FontSize="{DynamicResource {x:Static themes:ToolkitThemes.Heading1FontSizeKey}}"
                    Text="Getting Started with the AWS Toolkit"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left" />

                <TextBlock
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="12 0 0 0">
                    <Hyperlink
                        Command="{Binding OpenUsingToolkitDocsCommand}">
                        Documentation
                    </Hyperlink>
                    <Run Text="|" />
                    <Hyperlink
                        Command="{Binding OpenGitHubCommand}">
                        GitHub
                    </Hyperlink>
                </TextBlock>

            </Grid>

            <commonUi:CardControl 
                Grid.Row="1"
                Grid.Column="0"
                MaxWidth="650"
                SelectedValue="{Binding CurrentStep}"
                SelectedValuePath="Tag">
                <!-- Names on items below is for CardControl selection, not access in code-behind -->
                <wizard:AddEditProfileWizardView
                    Tag="{x:Static local:GettingStartedStep.AddEditProfileWizard}">
                    <wizBehaviors:Mvvm.ViewModel>
                        <wizard:AddEditProfileWizardViewModel />
                    </wizBehaviors:Mvvm.ViewModel>
                </wizard:AddEditProfileWizardView>

                <StackPanel
                    Tag="{x:Static local:GettingStartedStep.GettingStarted}">
                    <commonUi:StatusBox
                        Status="{Binding Status}">
                        <commonUi:StatusBox.Style>
                            <Style TargetType="{x:Type commonUi:StatusBox}">
                                <Style.Triggers>
                                    <DataTrigger
                                        Binding="{Binding Status}"
                                        Value="False">
                                        <Setter
                                            Property="Content">
                                            <Setter.Value>
                                                <StackPanel
                                                    Margin="12">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <images:VsImage 
                                                            Grid.Column="0"
                                                            Height="16"
                                                            Source="{Binding Source={StaticResource VsImages}, Path=StatusError}"
                                                            Width="16"
                                                            VerticalAlignment="Center" />

                                                        <TextBlock
                                                            Grid.Column="1"
                                                            Margin="3 0 0 0"
                                                            TextWrapping="Wrap"
                                                            FontSize="{DynamicResource {x:Static themes:ToolkitThemes.Heading4FontSizeKey}}"
                                                            Text="An error has occurred while attempting to connect to your profile." />
                                                    </Grid>

                                                    <TextBlock
                                                        Grid.Row="1"
                                                        Grid.Column="0"
                                                        TextWrapping="WrapWithOverflow"
                                                        Foreground="{DynamicResource {x:Static themes:ToolkitThemes.ErrorTextBrushKey}}">
                                                        <TextBlock.Inlines>
                                                            <Run>The Toolkit was unable to connect to your AWS profile and your local AWS credentials
                                                            file hasn’t been updated. Please check the information below to connect to AWS and update
                                                            your local AWS credentials file.  For additional details about this error</Run>
                                                            <Hyperlink Command="{Binding OpenLogsCommand}">open logs.</Hyperlink>
                                                        </TextBlock.Inlines>
                                                    </TextBlock>
                                                </StackPanel>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger
                                        Binding="{Binding Status}"
                                        Value="True">
                                        <Setter
                                            Property="Content">
                                            <Setter.Value>
                                                <DockPanel
                                                    Margin="12"
                                                    LastChildFill="True">
                                                    <Button
                                                        x:Name="auth_openAWSExplorer"
                                                        Margin="6 0 0 0"
                                                        DockPanel.Dock="Right"
                                                        MaxHeight="40"
                                                        Command="{Binding OpenAwsExplorerAsyncCommand}"
                                                        Content="Open AWS Explorer"
                                                        Style="{DynamicResource {x:Static themes:ToolkitThemeResourceKeys.ButtonStyle}}">
                                                        <wizBehaviors:UiClickMetric.Configure>
                                                            <wizBehaviors:UiClickMetricConfig />
                                                        </wizBehaviors:UiClickMetric.Configure>
                                                    </Button>
                                                    <StackPanel>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>

                                                            <images:VsImage 
                                                                Grid.Column="0"
                                                                Height="16"
                                                                Source="{Binding Source={StaticResource VsImages}, Path=StatusOK}"
                                                                Width="16"
                                                                VerticalAlignment="Center" />

                                                            <WrapPanel
                                                                Grid.Column="1">
                                                                <TextBlock
                                                                    Margin="3 0 0 0"
                                                                    TextWrapping="Wrap"
                                                                    FontSize="{DynamicResource {x:Static themes:ToolkitThemes.Heading4FontSizeKey}}">
                                                                    <TextBlock.Text>
                                                                        <MultiBinding StringFormat="{}Connected to {0}: {1}">
                                                                            <Binding Path="CredentialTypeName" FallbackValue="(not available)" />
                                                                            <Binding Path="CredentialName" FallbackValue="(not available)" />
                                                                        </MultiBinding>
                                                                    </TextBlock.Text>
                                                                </TextBlock>
                                                            </WrapPanel>
                                                        </Grid>

                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="0"
                                                            TextWrapping="WrapWithOverflow"
                                                            Foreground="{DynamicResource {x:Static themes:ToolkitThemes.SuccessTextBrushKey}}"
                                                            Text="Open the AWS Explorer to add and switch between additional profiles." />
                                                    </StackPanel>
                                                </DockPanel>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </commonUi:StatusBox.Style>
                    </commonUi:StatusBox>

                    <Border BorderThickness="1" Margin="0 12 0 0">
                        <StackPanel Margin="12">
                            <CheckBox
                                Margin="6 0 0 0"
                                Padding="0"
                                IsChecked="{Binding CollectAnalytics}"
                                VerticalContentAlignment="Top">
                                <TextBlock
                                    Margin="6 0 0 0"
                                    Padding="0"
                                    TextWrapping="Wrap"
                                    FontSize="{DynamicResource {x:Static themes:ToolkitThemes.Heading4FontSizeKey}}"
                                    MouseDown="TextBlock_SwallowEvents"
                                    VerticalAlignment="Top">
                                    <Run Text="Allow AWS Toolkit to collect usage information (" /><Span>
                                        <Hyperlink
                                            Command="{Binding OpenTelemetryDisclosureCommand}">
                                            details
                                        </Hyperlink>
                                    </Span><Run Text=")"/>
                                </TextBlock>
                            </CheckBox>

                            <TextBlock
                                Margin="6 3 0 0"
                                TextWrapping="WrapWithOverflow">
                                <Run
                                    Text="By letting us know which Toolkit features are used, this data helps improve the AWS Toolkit and other Amazon products and services. AWS handles this data in accordance with the" />
                                <Hyperlink
                                    Command="{Binding OpenPrivacyPolicyCommand}">
                                    AWS Privacy Policy.
                                </Hyperlink>
                                <Run Text=" When available, an AWS Account ID is associated with this information." />
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <Grid Margin="15 30 0  0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <TextBlock
                            Grid.Row="0"
                            FontWeight="SemiBold"
                            FontSize="{DynamicResource {x:Static themes:ToolkitThemes.Heading3FontSizeKey}}"
                            Text="Documentation and Tutorials" />

                        <FlowDocumentScrollViewer
                            Grid.Row="1"
                            VerticalScrollBarVisibility="Auto"
                            Margin="-20,0,4,0">
                            <FlowDocument
                                Style="{DynamicResource {x:Static themes:ToolkitThemeResourceKeys.FlowDocumentStyle}}">
                                <List>
                                    <ListItem>
                                        <Paragraph>
                                            <commonUi:HyperlinkText
                                                HorizontalAlignment="Center"
                                                OpenUrlCommand="{Binding OpenUsingToolkitDocsCommand}"
                                                LinkText="Using the Toolkit for Visual Studio" />
                                        </Paragraph>
                                    </ListItem>
                                    <ListItem Margin="0 6 0 0">
                                        <Paragraph>
                                            <commonUi:HyperlinkText
                                                HorizontalAlignment="Center"
                                                OpenUrlCommand="{Binding OpenDeployLambdaDocsCommand}"
                                                LinkText="Deploying C# Functions to AWS Lambda" />
                                        </Paragraph>
                                    </ListItem>
                                    <ListItem Margin="0 6 0 0">
                                        <Paragraph>
                                            <commonUi:HyperlinkText
                                                HorizontalAlignment="Center"
                                                OpenUrlCommand="{Binding OpenDeployBeanstalkDocsCommand}"
                                                LinkText="Deploying .NET Applications on AWS Elastic Beanstalk" />
                                        </Paragraph>
                                    </ListItem>
                                    <ListItem Margin="0 6  0 0">
                                        <Paragraph>
                                            <commonUi:HyperlinkText
                                                HorizontalAlignment="Center"
                                                OpenUrlCommand="{Binding OpenDevBlogCommand}"
                                                LinkText="AWS .NET Developer Blog" />
                                        </Paragraph>
                                    </ListItem>
                                </List>
                            </FlowDocument>
                        </FlowDocumentScrollViewer>
                    </Grid>
                </StackPanel>
            </commonUi:CardControl>
        </Grid>
    </ScrollViewer>
</commonUi:BaseAWSControl>
